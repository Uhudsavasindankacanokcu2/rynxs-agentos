{"event":{"aggregate_id":"universe/agent-000","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{},"name":"agent-000","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v1.0.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"78fc19249e2d835a"},"seq":0,"ts":0,"type":"AgentObserved"},"event_hash":"9cc66c44bd92206c343d41160092104dfda71582f36006ee1865e95052e8fc3b","prev_hash":"0000000000000000000000000000000000000000000000000000000000000000"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_ids":["02e2a276c672424e1aa0f575fff03cc35568b37dd0c38021e3d415608ba44f79","698c64c870c510a1a285b989bc3010f209155c14c20b97f10a7c0ebae7037a33","a919b93cf409fc5677ad26817cbcdcd1f0824bd2b0e9860b68ab15e3ae9e6c5d","e9e30f11edc31a1a06ca29d170eb054b196e27c662c7c7b98bb471b63d125931"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v1.0.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-000-spec","namespace":"universe"},"target":"universe/agent-000-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-000-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-000"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v1.0.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-000-workspace"},{"configmap":"agent-000-spec","name":"agent-spec"}]}},"target":"universe/agent-000-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-000-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-000","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-000-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-000-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-000-workspace"}],"actions_hash":"b5df8601f452c39a7f1e66d979d53ff0ef61b5f7b7501290a586662fe4f5792c","agent_id":"universe/agent-000","trigger_event_hash":"9cc66c44bd92206c343d41160092104dfda71582f36006ee1865e95052e8fc3b","trigger_event_seq":0,"trigger_event_type":"AgentObserved","trigger_spec_hash":"78fc19249e2d835a"},"seq":1,"ts":1,"type":"ActionsDecided"},"event_hash":"cebbeb21bef8bed87d3b3d2c938964f778ad9122e3048ac4186286779f365598","prev_hash":"9cc66c44bd92206c343d41160092104dfda71582f36006ee1865e95052e8fc3b"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"02e2a276c672424e1aa0f575fff03cc35568b37dd0c38021e3d415608ba44f79","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-000-spec"},"seq":2,"ts":2,"type":"ActionApplied"},"event_hash":"01f6d2183f1c011ecdb30df6bf56ba162599be9680f68365603989362e263bd2","prev_hash":"cebbeb21bef8bed87d3b3d2c938964f778ad9122e3048ac4186286779f365598"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"698c64c870c510a1a285b989bc3010f209155c14c20b97f10a7c0ebae7037a33","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-000-runtime"},"seq":3,"ts":3,"type":"ActionApplied"},"event_hash":"faff812b75fce7a0aca8968814bf1cd605db41b1c465dc18c69fb08f796448c5","prev_hash":"01f6d2183f1c011ecdb30df6bf56ba162599be9680f68365603989362e263bd2"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"a919b93cf409fc5677ad26817cbcdcd1f0824bd2b0e9860b68ab15e3ae9e6c5d","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-000-deny-egress"},"seq":4,"ts":4,"type":"ActionApplied"},"event_hash":"78d9365dd772a08586d78db806fb64635a0f58d84af8403d244e4f141b02000b","prev_hash":"faff812b75fce7a0aca8968814bf1cd605db41b1c465dc18c69fb08f796448c5"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"e9e30f11edc31a1a06ca29d170eb054b196e27c662c7c7b98bb471b63d125931","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-000-workspace"},"seq":5,"ts":5,"type":"ActionApplied"},"event_hash":"707c189e70c5051b2357b6514a0483002c714d37032cda8fa5889168abb0246c","prev_hash":"78d9365dd772a08586d78db806fb64635a0f58d84af8403d244e4f141b02000b"}
{"event":{"aggregate_id":"universe/agent-001","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{},"name":"agent-001","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v1.0.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"78fc19249e2d835a"},"seq":6,"ts":0,"type":"AgentObserved"},"event_hash":"c5e34c37ada7128e05573ffbb66d7d3d23d5ec1225f39ec4abceb81a47859b45","prev_hash":"707c189e70c5051b2357b6514a0483002c714d37032cda8fa5889168abb0246c"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_ids":["52825c0aad6a865a8cbaa32c28475bdfc0562243136126157cb66dc5150c5b3d","c5f4dc6d5b0bd40112d274010dc51d4a151bec8305c579e206cbb3a366447311","a46e31babb7f0b3fb6e24711f76a6f79c402ad5a1a6041da5e90cbac7232395d","ba5c2bdb0cb804724728e11104854f2982b7a7c513a02a4c7018ea5199fc4c6f"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v1.0.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-001-spec","namespace":"universe"},"target":"universe/agent-001-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-001-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-001"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v1.0.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-001-workspace"},{"configmap":"agent-001-spec","name":"agent-spec"}]}},"target":"universe/agent-001-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-001-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-001","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-001-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-001-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-001-workspace"}],"actions_hash":"5b38b004f86ac720658e29d39c60ff83da65353df92362e7d7de2710d7813348","agent_id":"universe/agent-001","trigger_event_hash":"c5e34c37ada7128e05573ffbb66d7d3d23d5ec1225f39ec4abceb81a47859b45","trigger_event_seq":6,"trigger_event_type":"AgentObserved","trigger_spec_hash":"78fc19249e2d835a"},"seq":7,"ts":6,"type":"ActionsDecided"},"event_hash":"25ebf35a9951c7ef93463a4b45fe7b3a639ac141f1acce3910d5a48995f2fede","prev_hash":"c5e34c37ada7128e05573ffbb66d7d3d23d5ec1225f39ec4abceb81a47859b45"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"52825c0aad6a865a8cbaa32c28475bdfc0562243136126157cb66dc5150c5b3d","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-001-spec"},"seq":8,"ts":7,"type":"ActionApplied"},"event_hash":"925dd6e3befd1092f3db684068d2478790d03d6a5066a0c5317f3e61698d3859","prev_hash":"25ebf35a9951c7ef93463a4b45fe7b3a639ac141f1acce3910d5a48995f2fede"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"c5f4dc6d5b0bd40112d274010dc51d4a151bec8305c579e206cbb3a366447311","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-001-runtime"},"seq":9,"ts":8,"type":"ActionApplied"},"event_hash":"7841a808df3d39105340a198302590bfe978afbdb5e55e2c32630ccb5f5252e9","prev_hash":"925dd6e3befd1092f3db684068d2478790d03d6a5066a0c5317f3e61698d3859"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"a46e31babb7f0b3fb6e24711f76a6f79c402ad5a1a6041da5e90cbac7232395d","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-001-deny-egress"},"seq":10,"ts":9,"type":"ActionApplied"},"event_hash":"b2332b37a2a2c8b92956e4de94650ac8cdf5756df1f6ae3e68695dac54172419","prev_hash":"7841a808df3d39105340a198302590bfe978afbdb5e55e2c32630ccb5f5252e9"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"ba5c2bdb0cb804724728e11104854f2982b7a7c513a02a4c7018ea5199fc4c6f","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-001-workspace"},"seq":11,"ts":10,"type":"ActionApplied"},"event_hash":"ce53a39ddb47d0543510b55955e303c69489ca9f56e26671539b8a26d5fa276d","prev_hash":"b2332b37a2a2c8b92956e4de94650ac8cdf5756df1f6ae3e68695dac54172419"}
