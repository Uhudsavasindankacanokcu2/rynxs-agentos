{"event":{"aggregate_id":"universe/agent-100","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","team":"backend-team"},"name":"agent-100","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"latest","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"02d3af34097dd3cd"},"seq":0,"ts":0,"type":"AgentObserved"},"event_hash":"eb73fd921fbf891c81b9380125df1a201892a8c0d98dd539ad01e74d5355e249","prev_hash":"0000000000000000000000000000000000000000000000000000000000000000"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_ids":["af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"latest\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-100-spec","namespace":"universe"},"target":"universe/agent-100-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-100-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-100"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:latest","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-100-workspace"},{"configmap":"agent-100-spec","name":"agent-spec"}]}},"target":"universe/agent-100-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-100-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-100","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-100-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-100-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-100-workspace"}],"actions_hash":"a1fd533e5c7a2467e2e40c822c44955739d1bdbb089b2c47a9c3491c8eb752c9","agent_id":"universe/agent-100","trigger_event_hash":"eb73fd921fbf891c81b9380125df1a201892a8c0d98dd539ad01e74d5355e249","trigger_event_seq":0,"trigger_event_type":"AgentObserved","trigger_spec_hash":"02d3af34097dd3cd"},"seq":1,"ts":1,"type":"ActionsDecided"},"event_hash":"9e8ed3dba4e85746ac64350c396047f791894f5e26ff440e12a98bdca912d599","prev_hash":"eb73fd921fbf891c81b9380125df1a201892a8c0d98dd539ad01e74d5355e249"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-100-spec"},"seq":2,"ts":2,"type":"ActionApplied"},"event_hash":"d1ab4acce5b39e197ed7932497de7c7b82940cfd20655f62984b8dc917997ca4","prev_hash":"9e8ed3dba4e85746ac64350c396047f791894f5e26ff440e12a98bdca912d599"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","error":{"code":"K8S_CONFLICT","reason":"Conflict","status":409,"type":"ApiException"},"result_code":"K8S_CONFLICT","target":"universe/agent-100-runtime"},"seq":3,"ts":3,"type":"ActionFailed"},"event_hash":"a6fcb0128f47cff54fa487ea03f2c553ff1a3bde06cfb681781e95a8c8e3f390","prev_hash":"d1ab4acce5b39e197ed7932497de7c7b82940cfd20655f62984b8dc917997ca4"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-100-runtime"},"seq":4,"ts":4,"type":"ActionApplied"},"event_hash":"036aba92ae37d943b7ce6fd42f8a9cb493d88676c1e895814ba408791cea93e7","prev_hash":"a6fcb0128f47cff54fa487ea03f2c553ff1a3bde06cfb681781e95a8c8e3f390"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-100-deny-egress"},"seq":5,"ts":5,"type":"ActionApplied"},"event_hash":"b171653059a50db5ea2cdad92167aa17d2cdd0beb083630097f035f06a731ce0","prev_hash":"036aba92ae37d943b7ce6fd42f8a9cb493d88676c1e895814ba408791cea93e7"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-100-workspace"},"seq":6,"ts":6,"type":"ActionApplied"},"event_hash":"ab152c302a4b38b9f85fb9761970e5c34aa5da2ac4f2e1d2e0a1d0693b081262","prev_hash":"b171653059a50db5ea2cdad92167aa17d2cdd0beb083630097f035f06a731ce0"}
{"event":{"aggregate_id":"universe/agent-100","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","team":"backend-team"},"name":"agent-100","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"latest","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"02d3af34097dd3cd"},"seq":7,"ts":0,"type":"AgentObserved"},"event_hash":"c91b11aedc19968b6d90b531437474e4b095d6ff60d668648847726aececfaf2","prev_hash":"ab152c302a4b38b9f85fb9761970e5c34aa5da2ac4f2e1d2e0a1d0693b081262"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_ids":["af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"latest\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-100-spec","namespace":"universe"},"target":"universe/agent-100-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-100-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-100"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:latest","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-100-workspace"},{"configmap":"agent-100-spec","name":"agent-spec"}]}},"target":"universe/agent-100-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-100-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-100","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-100-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-100-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-100-workspace"}],"actions_hash":"a1fd533e5c7a2467e2e40c822c44955739d1bdbb089b2c47a9c3491c8eb752c9","agent_id":"universe/agent-100","trigger_event_hash":"c91b11aedc19968b6d90b531437474e4b095d6ff60d668648847726aececfaf2","trigger_event_seq":7,"trigger_event_type":"AgentObserved","trigger_spec_hash":"02d3af34097dd3cd"},"seq":8,"ts":7,"type":"ActionsDecided"},"event_hash":"f02e93a6f7105483ab37b0ec4a28ce81f420b6972a8cc7a1b58755634db73445","prev_hash":"c91b11aedc19968b6d90b531437474e4b095d6ff60d668648847726aececfaf2"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-100-spec"},"seq":9,"ts":8,"type":"ActionApplied"},"event_hash":"479095b2a61c1df87f335729a24ce0e3f10a6873df907ee38caf1beba9ab1f8c","prev_hash":"f02e93a6f7105483ab37b0ec4a28ce81f420b6972a8cc7a1b58755634db73445"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-100-runtime"},"seq":10,"ts":9,"type":"ActionApplied"},"event_hash":"1c11049bbd49e8e8fe8da9ae17899d6455ece321f9c414c3f95e983d4dc8cc2e","prev_hash":"479095b2a61c1df87f335729a24ce0e3f10a6873df907ee38caf1beba9ab1f8c"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-100-deny-egress"},"seq":11,"ts":10,"type":"ActionApplied"},"event_hash":"ade1220158b929093e9ead7f81cacaa3d1160b0c0628e4832ca39f6aabbb4ae5","prev_hash":"1c11049bbd49e8e8fe8da9ae17899d6455ece321f9c414c3f95e983d4dc8cc2e"}
{"event":{"aggregate_id":"universe/agent-100","meta":{},"payload":{"action_id":"357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-100-workspace"},"seq":12,"ts":11,"type":"ActionApplied"},"event_hash":"08a99fb2e1cbdbf355b6f0ac4fa57669d3a7676438d75cd8829010b5bb012857","prev_hash":"ade1220158b929093e9ead7f81cacaa3d1160b0c0628e4832ca39f6aabbb4ae5"}
{"event":{"aggregate_id":"universe/agent-200","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","policy":"strict","team":"platform-team"},"name":"agent-200","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v2.1.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":true,"canManageTeam":false},"role":"manager","team":"platform-team","workspace":{"size":"2Gi"}},"spec_hash":"a0685a954dc6f97a"},"seq":13,"ts":0,"type":"AgentObserved"},"event_hash":"a20307d771831d50b04b763d0998d331490f33eda48cd899970ad31d5baa91d0","prev_hash":"08a99fb2e1cbdbf355b6f0ac4fa57669d3a7676438d75cd8829010b5bb012857"}
{"event":{"aggregate_id":"universe/agent-200","meta":{},"payload":{"action_ids":["3ef5321f0881ecdad0f0419ff1bae50971a4a8bfd06bad268a282f02c303febf","7f2fa55579f0fb19d4704b04132603795884fe621cdaa451cb8412f4e95f0133","44f0d64ea57826b4683889d31ca148f9d3b77621a5c194ce2054600c31826321","ee249e41bb3645b76107b7b9d52913e922aaaae6982d7ba473520196e30dbb42"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v2.1.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":true,\"canManageTeam\":false},\"role\":\"manager\",\"team\":\"platform-team\",\"workspace\":{\"size\":\"2Gi\"}}"},"name":"agent-200-spec","namespace":"universe"},"target":"universe/agent-200-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-200-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-200"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v2.1.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-200-workspace"},{"configmap":"agent-200-spec","name":"agent-spec"}]}},"target":"universe/agent-200-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-200-allow-egress","namespace":"universe","pod_selector":{"agent":"agent-200","app":"universe-agent"},"policy_type":"allow-egress"},"target":"universe/agent-200-allow-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-200-workspace","namespace":"universe","size":"2Gi"},"target":"universe/agent-200-workspace"}],"actions_hash":"9f0d8770d60b2ef604c0ebab6de19e680fbf351bc3c95b05cf0a9c8528069909","agent_id":"universe/agent-200","trigger_event_hash":"a20307d771831d50b04b763d0998d331490f33eda48cd899970ad31d5baa91d0","trigger_event_seq":13,"trigger_event_type":"AgentObserved","trigger_spec_hash":"a0685a954dc6f97a"},"seq":14,"ts":12,"type":"ActionsDecided"},"event_hash":"7c827c698bb5d9ce27ea9eadd6de97daaf3a637b8215581034421d7ab3444733","prev_hash":"a20307d771831d50b04b763d0998d331490f33eda48cd899970ad31d5baa91d0"}
{"event":{"aggregate_id":"universe/agent-200","meta":{},"payload":{"action_id":"3ef5321f0881ecdad0f0419ff1bae50971a4a8bfd06bad268a282f02c303febf","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-200-spec"},"seq":15,"ts":13,"type":"ActionApplied"},"event_hash":"892d4e1735d312e19e8fe0d9c7fa1c4bd5e2fc27882b508c924bd302400cc55e","prev_hash":"7c827c698bb5d9ce27ea9eadd6de97daaf3a637b8215581034421d7ab3444733"}
{"event":{"aggregate_id":"universe/agent-200","meta":{},"payload":{"action_id":"7f2fa55579f0fb19d4704b04132603795884fe621cdaa451cb8412f4e95f0133","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-200-runtime"},"seq":16,"ts":14,"type":"ActionApplied"},"event_hash":"ebb821648b8a3761cf40d4d7c68f62678d19643133f6f296381c1fc220d5637b","prev_hash":"892d4e1735d312e19e8fe0d9c7fa1c4bd5e2fc27882b508c924bd302400cc55e"}
{"event":{"aggregate_id":"universe/agent-200","meta":{},"payload":{"action_id":"44f0d64ea57826b4683889d31ca148f9d3b77621a5c194ce2054600c31826321","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-200-allow-egress"},"seq":17,"ts":15,"type":"ActionApplied"},"event_hash":"a2ae94168bfbf88efd203dc4b88f57fb4a2e4c519d67b0b024e34aaaa87b0f1b","prev_hash":"ebb821648b8a3761cf40d4d7c68f62678d19643133f6f296381c1fc220d5637b"}
{"event":{"aggregate_id":"universe/agent-200","meta":{},"payload":{"action_id":"ee249e41bb3645b76107b7b9d52913e922aaaae6982d7ba473520196e30dbb42","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-200-workspace"},"seq":18,"ts":16,"type":"ActionApplied"},"event_hash":"9a056719668eb13311700b0538d2684c3bf96cfbf55f1b82d5222a8dc4f08390","prev_hash":"a2ae94168bfbf88efd203dc4b88f57fb4a2e4c519d67b0b024e34aaaa87b0f1b"}
