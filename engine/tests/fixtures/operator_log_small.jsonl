{"event":{"aggregate_id":"universe/agent-000","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{},"name":"agent-000","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v1.0.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"78fc19249e2d835a"},"seq":0,"ts":0,"type":"AgentObserved"},"event_hash":"9cc66c44bd92206c343d41160092104dfda71582f36006ee1865e95052e8fc3b","prev_hash":"0000000000000000000000000000000000000000000000000000000000000000"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_ids":["02e2a276c672424e1aa0f575fff03cc35568b37dd0c38021e3d415608ba44f79","698c64c870c510a1a285b989bc3010f209155c14c20b97f10a7c0ebae7037a33","a919b93cf409fc5677ad26817cbcdcd1f0824bd2b0e9860b68ab15e3ae9e6c5d","e9e30f11edc31a1a06ca29d170eb054b196e27c662c7c7b98bb471b63d125931"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v1.0.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-000-spec","namespace":"universe"},"target":"universe/agent-000-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-000-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-000"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v1.0.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-000-workspace"},{"configmap":"agent-000-spec","name":"agent-spec"}]}},"target":"universe/agent-000-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-000-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-000","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-000-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-000-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-000-workspace"}],"actions_hash":"b5df8601f452c39a7f1e66d979d53ff0ef61b5f7b7501290a586662fe4f5792c","agent_id":"universe/agent-000","trigger_event_seq":0},"seq":1,"ts":1,"type":"ActionsDecided"},"event_hash":"7045a188cf8834aedfdce5f1f6b38b99de1a0cce46a7039a2996ed8477919e21","prev_hash":"9cc66c44bd92206c343d41160092104dfda71582f36006ee1865e95052e8fc3b"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"02e2a276c672424e1aa0f575fff03cc35568b37dd0c38021e3d415608ba44f79","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-000-spec"},"seq":2,"ts":2,"type":"ActionApplied"},"event_hash":"5cf97c20893887b4f13a37fb7670d9676a19b6aded3e544795617444fcda3c92","prev_hash":"7045a188cf8834aedfdce5f1f6b38b99de1a0cce46a7039a2996ed8477919e21"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"698c64c870c510a1a285b989bc3010f209155c14c20b97f10a7c0ebae7037a33","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-000-runtime"},"seq":3,"ts":3,"type":"ActionApplied"},"event_hash":"0284acc7d60cf96c6091f521c4f1c5dc5c3522468930478ba1365b6cddc3ca18","prev_hash":"5cf97c20893887b4f13a37fb7670d9676a19b6aded3e544795617444fcda3c92"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"a919b93cf409fc5677ad26817cbcdcd1f0824bd2b0e9860b68ab15e3ae9e6c5d","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-000-deny-egress"},"seq":4,"ts":4,"type":"ActionApplied"},"event_hash":"532bc17d510dd28eaee10c421031d9f5f572ec4eb5e336634d28de85bdba2f50","prev_hash":"0284acc7d60cf96c6091f521c4f1c5dc5c3522468930478ba1365b6cddc3ca18"}
{"event":{"aggregate_id":"universe/agent-000","meta":{},"payload":{"action_id":"e9e30f11edc31a1a06ca29d170eb054b196e27c662c7c7b98bb471b63d125931","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-000-workspace"},"seq":5,"ts":5,"type":"ActionApplied"},"event_hash":"3ad1d0b2ae4956fdec792cf6a61bccc93ca827329c680da9f650460e05a5d444","prev_hash":"532bc17d510dd28eaee10c421031d9f5f572ec4eb5e336634d28de85bdba2f50"}
{"event":{"aggregate_id":"universe/agent-001","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{},"name":"agent-001","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v1.0.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"78fc19249e2d835a"},"seq":6,"ts":0,"type":"AgentObserved"},"event_hash":"6aec171cd1fabd9d50199b521e010f9ea24a3fc3f060b21b22809fea15b3fcd4","prev_hash":"3ad1d0b2ae4956fdec792cf6a61bccc93ca827329c680da9f650460e05a5d444"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_ids":["52825c0aad6a865a8cbaa32c28475bdfc0562243136126157cb66dc5150c5b3d","c5f4dc6d5b0bd40112d274010dc51d4a151bec8305c579e206cbb3a366447311","a46e31babb7f0b3fb6e24711f76a6f79c402ad5a1a6041da5e90cbac7232395d","ba5c2bdb0cb804724728e11104854f2982b7a7c513a02a4c7018ea5199fc4c6f"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v1.0.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-001-spec","namespace":"universe"},"target":"universe/agent-001-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-001-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-001"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v1.0.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-001-workspace"},{"configmap":"agent-001-spec","name":"agent-spec"}]}},"target":"universe/agent-001-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-001-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-001","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-001-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-001-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-001-workspace"}],"actions_hash":"5b38b004f86ac720658e29d39c60ff83da65353df92362e7d7de2710d7813348","agent_id":"universe/agent-001","trigger_event_seq":6},"seq":7,"ts":6,"type":"ActionsDecided"},"event_hash":"ed8d1fc02ada5e826e2ebe2b4040ea414d6c959ab525cee8583c4fd1bcdf0693","prev_hash":"6aec171cd1fabd9d50199b521e010f9ea24a3fc3f060b21b22809fea15b3fcd4"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"52825c0aad6a865a8cbaa32c28475bdfc0562243136126157cb66dc5150c5b3d","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-001-spec"},"seq":8,"ts":7,"type":"ActionApplied"},"event_hash":"6e6ac7a7fffaa0901a3c1b19945fb7842a2c70d729e0e03844b3f0c76863f721","prev_hash":"ed8d1fc02ada5e826e2ebe2b4040ea414d6c959ab525cee8583c4fd1bcdf0693"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"c5f4dc6d5b0bd40112d274010dc51d4a151bec8305c579e206cbb3a366447311","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-001-runtime"},"seq":9,"ts":8,"type":"ActionApplied"},"event_hash":"eeb5770debd82398e3eaf6191e34c08d5958edf06652ff3738517cb16deb4d38","prev_hash":"6e6ac7a7fffaa0901a3c1b19945fb7842a2c70d729e0e03844b3f0c76863f721"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"a46e31babb7f0b3fb6e24711f76a6f79c402ad5a1a6041da5e90cbac7232395d","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-001-deny-egress"},"seq":10,"ts":9,"type":"ActionApplied"},"event_hash":"5b2a1944d951083d2a50dc25bb59e3f291696c0034be8046f915e6af8b8b5cb4","prev_hash":"eeb5770debd82398e3eaf6191e34c08d5958edf06652ff3738517cb16deb4d38"}
{"event":{"aggregate_id":"universe/agent-001","meta":{},"payload":{"action_id":"ba5c2bdb0cb804724728e11104854f2982b7a7c513a02a4c7018ea5199fc4c6f","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-001-workspace"},"seq":11,"ts":10,"type":"ActionApplied"},"event_hash":"91a1d5e6e172f9e477571643e1509c6bdbdade07131821c61344795e66528013","prev_hash":"5b2a1944d951083d2a50dc25bb59e3f291696c0034be8046f915e6af8b8b5cb4"}
