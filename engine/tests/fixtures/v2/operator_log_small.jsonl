{"event":{"aggregate_id":"universe/agent-000","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{},"name":"agent-000","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v1.0.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"78fc19249e2d835a"},"seq":0,"ts":0,"type":"AgentObserved"},"event_hash":"6ef10f020b681ac92e56aaf289d94ee43d31b11a18730562a9035f1b365fa77f","prev_hash":"0000000000000000000000000000000000000000000000000000000000000000"}
{"event":{"aggregate_id":"universe/agent-000","hash_version":"v2","payload":{"action_ids":["02e2a276c672424e1aa0f575fff03cc35568b37dd0c38021e3d415608ba44f79","698c64c870c510a1a285b989bc3010f209155c14c20b97f10a7c0ebae7037a33","a919b93cf409fc5677ad26817cbcdcd1f0824bd2b0e9860b68ab15e3ae9e6c5d","e9e30f11edc31a1a06ca29d170eb054b196e27c662c7c7b98bb471b63d125931"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v1.0.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-000-spec","namespace":"universe"},"target":"universe/agent-000-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-000-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-000"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v1.0.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-000-workspace"},{"configmap":"agent-000-spec","name":"agent-spec"}]}},"target":"universe/agent-000-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-000-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-000","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-000-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-000-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-000-workspace"}],"actions_hash":"b5df8601f452c39a7f1e66d979d53ff0ef61b5f7b7501290a586662fe4f5792c","agent_id":"universe/agent-000","trigger_event_hash":"6ef10f020b681ac92e56aaf289d94ee43d31b11a18730562a9035f1b365fa77f","trigger_event_seq":0,"trigger_event_type":"AgentObserved","trigger_spec_hash":"78fc19249e2d835a"},"seq":1,"ts":1,"type":"ActionsDecided"},"event_hash":"1a4ffe3de68ee55cedf5dd38114f15a1615d8c471fd68948f632d21c4027955d","prev_hash":"6ef10f020b681ac92e56aaf289d94ee43d31b11a18730562a9035f1b365fa77f"}
{"event":{"aggregate_id":"universe/agent-000","hash_version":"v2","payload":{"action_id":"02e2a276c672424e1aa0f575fff03cc35568b37dd0c38021e3d415608ba44f79","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-000-spec"},"seq":2,"ts":2,"type":"ActionApplied"},"event_hash":"73001e21ef74fbfa02f563dc8b12e32bc4f641ddcd04b26512d4b6b234f91f7c","prev_hash":"1a4ffe3de68ee55cedf5dd38114f15a1615d8c471fd68948f632d21c4027955d"}
{"event":{"aggregate_id":"universe/agent-000","hash_version":"v2","payload":{"action_id":"698c64c870c510a1a285b989bc3010f209155c14c20b97f10a7c0ebae7037a33","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-000-runtime"},"seq":3,"ts":3,"type":"ActionApplied"},"event_hash":"b016752919ad0100197aeb5b2594818b0e904abc0e94bc5677126cc08b3b6dce","prev_hash":"73001e21ef74fbfa02f563dc8b12e32bc4f641ddcd04b26512d4b6b234f91f7c"}
{"event":{"aggregate_id":"universe/agent-000","hash_version":"v2","payload":{"action_id":"a919b93cf409fc5677ad26817cbcdcd1f0824bd2b0e9860b68ab15e3ae9e6c5d","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-000-deny-egress"},"seq":4,"ts":4,"type":"ActionApplied"},"event_hash":"46fa3b15b3609b4cee8248098c39db78e3e008d4897e3fc6dcb4c8a61e5f20a7","prev_hash":"b016752919ad0100197aeb5b2594818b0e904abc0e94bc5677126cc08b3b6dce"}
{"event":{"aggregate_id":"universe/agent-000","hash_version":"v2","payload":{"action_id":"e9e30f11edc31a1a06ca29d170eb054b196e27c662c7c7b98bb471b63d125931","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-000-workspace"},"seq":5,"ts":5,"type":"ActionApplied"},"event_hash":"18110839e9cb7529507b677a95f41c1ef64a7dee7160253ad0f843e89b279bca","prev_hash":"46fa3b15b3609b4cee8248098c39db78e3e008d4897e3fc6dcb4c8a61e5f20a7"}
{"event":{"aggregate_id":"universe/agent-001","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{},"name":"agent-001","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v1.0.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"78fc19249e2d835a"},"seq":6,"ts":0,"type":"AgentObserved"},"event_hash":"b493fed9188f153abd2f4d37652b7a61fa454680a5f139009240920dbf522696","prev_hash":"18110839e9cb7529507b677a95f41c1ef64a7dee7160253ad0f843e89b279bca"}
{"event":{"aggregate_id":"universe/agent-001","hash_version":"v2","payload":{"action_ids":["52825c0aad6a865a8cbaa32c28475bdfc0562243136126157cb66dc5150c5b3d","c5f4dc6d5b0bd40112d274010dc51d4a151bec8305c579e206cbb3a366447311","a46e31babb7f0b3fb6e24711f76a6f79c402ad5a1a6041da5e90cbac7232395d","ba5c2bdb0cb804724728e11104854f2982b7a7c513a02a4c7018ea5199fc4c6f"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v1.0.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-001-spec","namespace":"universe"},"target":"universe/agent-001-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-001-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-001"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v1.0.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-001-workspace"},{"configmap":"agent-001-spec","name":"agent-spec"}]}},"target":"universe/agent-001-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-001-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-001","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-001-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-001-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-001-workspace"}],"actions_hash":"5b38b004f86ac720658e29d39c60ff83da65353df92362e7d7de2710d7813348","agent_id":"universe/agent-001","trigger_event_hash":"b493fed9188f153abd2f4d37652b7a61fa454680a5f139009240920dbf522696","trigger_event_seq":6,"trigger_event_type":"AgentObserved","trigger_spec_hash":"78fc19249e2d835a"},"seq":7,"ts":6,"type":"ActionsDecided"},"event_hash":"d700c668915bdaad33ccb00c9dfb21cb58a1809013d765d6d9c1968dc759e15a","prev_hash":"b493fed9188f153abd2f4d37652b7a61fa454680a5f139009240920dbf522696"}
{"event":{"aggregate_id":"universe/agent-001","hash_version":"v2","payload":{"action_id":"52825c0aad6a865a8cbaa32c28475bdfc0562243136126157cb66dc5150c5b3d","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-001-spec"},"seq":8,"ts":7,"type":"ActionApplied"},"event_hash":"e4b952717bcf5ef885b1782c3b88d2af857e858f9c420372d3386285d33d5a95","prev_hash":"d700c668915bdaad33ccb00c9dfb21cb58a1809013d765d6d9c1968dc759e15a"}
{"event":{"aggregate_id":"universe/agent-001","hash_version":"v2","payload":{"action_id":"c5f4dc6d5b0bd40112d274010dc51d4a151bec8305c579e206cbb3a366447311","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-001-runtime"},"seq":9,"ts":8,"type":"ActionApplied"},"event_hash":"aa65a13bafbe7787862fbe3e278e506e0e83b6c99c27239db6497fcfbf161f47","prev_hash":"e4b952717bcf5ef885b1782c3b88d2af857e858f9c420372d3386285d33d5a95"}
{"event":{"aggregate_id":"universe/agent-001","hash_version":"v2","payload":{"action_id":"a46e31babb7f0b3fb6e24711f76a6f79c402ad5a1a6041da5e90cbac7232395d","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-001-deny-egress"},"seq":10,"ts":9,"type":"ActionApplied"},"event_hash":"c936390b49bf5c1b9e4e9e7bb842f4e957c5732dcb3e128b75d9bef2e07f277b","prev_hash":"aa65a13bafbe7787862fbe3e278e506e0e83b6c99c27239db6497fcfbf161f47"}
{"event":{"aggregate_id":"universe/agent-001","hash_version":"v2","payload":{"action_id":"ba5c2bdb0cb804724728e11104854f2982b7a7c513a02a4c7018ea5199fc4c6f","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-001-workspace"},"seq":11,"ts":10,"type":"ActionApplied"},"event_hash":"7bfdfaffe5d9e29f638aa3dc22a947cbd514f65b0b46c79c313424e2b7ffdef4","prev_hash":"c936390b49bf5c1b9e4e9e7bb842f4e957c5732dcb3e128b75d9bef2e07f277b"}
