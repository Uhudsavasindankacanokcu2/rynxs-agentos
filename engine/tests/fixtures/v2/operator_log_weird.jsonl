{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","team":"backend-team"},"name":"agent-100","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"latest","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"02d3af34097dd3cd"},"seq":0,"ts":0,"type":"AgentObserved"},"event_hash":"78fc7a80400422542b0557d1c56e6453d47c0ae2ce912a8b6d8c6ab8b82053b7","prev_hash":"0000000000000000000000000000000000000000000000000000000000000000"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_ids":["af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"latest\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-100-spec","namespace":"universe"},"target":"universe/agent-100-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-100-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-100"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:latest","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-100-workspace"},{"configmap":"agent-100-spec","name":"agent-spec"}]}},"target":"universe/agent-100-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-100-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-100","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-100-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-100-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-100-workspace"}],"actions_hash":"a1fd533e5c7a2467e2e40c822c44955739d1bdbb089b2c47a9c3491c8eb752c9","agent_id":"universe/agent-100","trigger_event_hash":"78fc7a80400422542b0557d1c56e6453d47c0ae2ce912a8b6d8c6ab8b82053b7","trigger_event_seq":0,"trigger_event_type":"AgentObserved","trigger_spec_hash":"02d3af34097dd3cd"},"seq":1,"ts":1,"type":"ActionsDecided"},"event_hash":"8bbb2ed55990c46f0ab93661579d7908cf5482ff3e56b29f7eda3015408a99cf","prev_hash":"78fc7a80400422542b0557d1c56e6453d47c0ae2ce912a8b6d8c6ab8b82053b7"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-100-spec"},"seq":2,"ts":2,"type":"ActionApplied"},"event_hash":"c4fbcb927fdc4f81dcade3f402a1199a783d4defd172185db6fc741c886e232e","prev_hash":"8bbb2ed55990c46f0ab93661579d7908cf5482ff3e56b29f7eda3015408a99cf"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","error":{"code":"K8S_CONFLICT","reason":"Conflict","status":409,"type":"ApiException"},"result_code":"K8S_CONFLICT","target":"universe/agent-100-runtime"},"seq":3,"ts":3,"type":"ActionFailed"},"event_hash":"9e29f2ab4c94584f1926bbb7f608393a764a2306db42dbc1a02b6aaa761ee0d9","prev_hash":"c4fbcb927fdc4f81dcade3f402a1199a783d4defd172185db6fc741c886e232e"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-100-runtime"},"seq":4,"ts":4,"type":"ActionApplied"},"event_hash":"94eb2857ca505ac4c2af81d4a89887467eae7d6e60982fdba45e8d750891c07e","prev_hash":"9e29f2ab4c94584f1926bbb7f608393a764a2306db42dbc1a02b6aaa761ee0d9"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-100-deny-egress"},"seq":5,"ts":5,"type":"ActionApplied"},"event_hash":"8dbfc21bfb52c32003d05d80270d29ba99144effb3ab6d49b81f3b5e4604bf1c","prev_hash":"94eb2857ca505ac4c2af81d4a89887467eae7d6e60982fdba45e8d750891c07e"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-100-workspace"},"seq":6,"ts":6,"type":"ActionApplied"},"event_hash":"10cfa6ba072cd9d13214bb81325d619cf175a96dab825e7c2b0e2f5060964832","prev_hash":"8dbfc21bfb52c32003d05d80270d29ba99144effb3ab6d49b81f3b5e4604bf1c"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","team":"backend-team"},"name":"agent-100","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"latest","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"02d3af34097dd3cd"},"seq":7,"ts":0,"type":"AgentObserved"},"event_hash":"8cabc0efaadfa8e22507e580d55c5dcdd64f1f899f6798e1f0a06fd1b319aad0","prev_hash":"10cfa6ba072cd9d13214bb81325d619cf175a96dab825e7c2b0e2f5060964832"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_ids":["af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"latest\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-100-spec","namespace":"universe"},"target":"universe/agent-100-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-100-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-100"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:latest","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-100-workspace"},{"configmap":"agent-100-spec","name":"agent-spec"}]}},"target":"universe/agent-100-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-100-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-100","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-100-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-100-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-100-workspace"}],"actions_hash":"a1fd533e5c7a2467e2e40c822c44955739d1bdbb089b2c47a9c3491c8eb752c9","agent_id":"universe/agent-100","trigger_event_hash":"8cabc0efaadfa8e22507e580d55c5dcdd64f1f899f6798e1f0a06fd1b319aad0","trigger_event_seq":7,"trigger_event_type":"AgentObserved","trigger_spec_hash":"02d3af34097dd3cd"},"seq":8,"ts":7,"type":"ActionsDecided"},"event_hash":"f0969240862ebf69c36b3fddad8b90c5aa1c7197c3f20ee773ae66b50283b854","prev_hash":"8cabc0efaadfa8e22507e580d55c5dcdd64f1f899f6798e1f0a06fd1b319aad0"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-100-spec"},"seq":9,"ts":8,"type":"ActionApplied"},"event_hash":"0b6ba0c8cea40583d3bbf82a5a086697111ac2a388afe1130969f46086b29cf3","prev_hash":"f0969240862ebf69c36b3fddad8b90c5aa1c7197c3f20ee773ae66b50283b854"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-100-runtime"},"seq":10,"ts":9,"type":"ActionApplied"},"event_hash":"bcc0abff39367e54af3409ee634a8b515ff09ad5e3e99378a1c78afcb173766b","prev_hash":"0b6ba0c8cea40583d3bbf82a5a086697111ac2a388afe1130969f46086b29cf3"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-100-deny-egress"},"seq":11,"ts":10,"type":"ActionApplied"},"event_hash":"499828866f05cd810ff2df9789cfee355d02584a10abbfb9ae22c85cff098294","prev_hash":"bcc0abff39367e54af3409ee634a8b515ff09ad5e3e99378a1c78afcb173766b"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-100-workspace"},"seq":12,"ts":11,"type":"ActionApplied"},"event_hash":"e7685161d217329e15b1613b4680afcfe4ba9fbbc91faa5ef60f8886343c6e6f","prev_hash":"499828866f05cd810ff2df9789cfee355d02584a10abbfb9ae22c85cff098294"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","policy":"strict","team":"platform-team"},"name":"agent-200","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v2.1.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":true,"canManageTeam":false},"role":"manager","team":"platform-team","workspace":{"size":"2Gi"}},"spec_hash":"a0685a954dc6f97a"},"seq":13,"ts":0,"type":"AgentObserved"},"event_hash":"c2d21771542c819d89f916ab33ecdf843ae27a305f91690ff3b708270c449c41","prev_hash":"e7685161d217329e15b1613b4680afcfe4ba9fbbc91faa5ef60f8886343c6e6f"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_ids":["3ef5321f0881ecdad0f0419ff1bae50971a4a8bfd06bad268a282f02c303febf","7f2fa55579f0fb19d4704b04132603795884fe621cdaa451cb8412f4e95f0133","44f0d64ea57826b4683889d31ca148f9d3b77621a5c194ce2054600c31826321","ee249e41bb3645b76107b7b9d52913e922aaaae6982d7ba473520196e30dbb42"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v2.1.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":true,\"canManageTeam\":false},\"role\":\"manager\",\"team\":\"platform-team\",\"workspace\":{\"size\":\"2Gi\"}}"},"name":"agent-200-spec","namespace":"universe"},"target":"universe/agent-200-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-200-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-200"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v2.1.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-200-workspace"},{"configmap":"agent-200-spec","name":"agent-spec"}]}},"target":"universe/agent-200-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-200-allow-egress","namespace":"universe","pod_selector":{"agent":"agent-200","app":"universe-agent"},"policy_type":"allow-egress"},"target":"universe/agent-200-allow-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-200-workspace","namespace":"universe","size":"2Gi"},"target":"universe/agent-200-workspace"}],"actions_hash":"9f0d8770d60b2ef604c0ebab6de19e680fbf351bc3c95b05cf0a9c8528069909","agent_id":"universe/agent-200","trigger_event_hash":"c2d21771542c819d89f916ab33ecdf843ae27a305f91690ff3b708270c449c41","trigger_event_seq":13,"trigger_event_type":"AgentObserved","trigger_spec_hash":"a0685a954dc6f97a"},"seq":14,"ts":12,"type":"ActionsDecided"},"event_hash":"0b1715e3b88b624139cf6a96e2648fee84f3b348ad30ce8e77f97486b52b7665","prev_hash":"c2d21771542c819d89f916ab33ecdf843ae27a305f91690ff3b708270c449c41"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"3ef5321f0881ecdad0f0419ff1bae50971a4a8bfd06bad268a282f02c303febf","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-200-spec"},"seq":15,"ts":13,"type":"ActionApplied"},"event_hash":"46819eb18ee2a30daa9784a4cf5b3fd43f1f1d310ef236c2f92e1149963887c9","prev_hash":"0b1715e3b88b624139cf6a96e2648fee84f3b348ad30ce8e77f97486b52b7665"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"7f2fa55579f0fb19d4704b04132603795884fe621cdaa451cb8412f4e95f0133","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-200-runtime"},"seq":16,"ts":14,"type":"ActionApplied"},"event_hash":"b79e8d62be86ba5bbb1b593e05fbc980fafb4c6c37404af9b95a91b7790655be","prev_hash":"46819eb18ee2a30daa9784a4cf5b3fd43f1f1d310ef236c2f92e1149963887c9"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"44f0d64ea57826b4683889d31ca148f9d3b77621a5c194ce2054600c31826321","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-200-allow-egress"},"seq":17,"ts":15,"type":"ActionApplied"},"event_hash":"56ab844038ebfd578402a7ba89377304c5256f31c6fc7ed789923347b1c5cd7e","prev_hash":"b79e8d62be86ba5bbb1b593e05fbc980fafb4c6c37404af9b95a91b7790655be"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"ee249e41bb3645b76107b7b9d52913e922aaaae6982d7ba473520196e30dbb42","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-200-workspace"},"seq":18,"ts":16,"type":"ActionApplied"},"event_hash":"084771ec62050e4faef22950ebb9809889a377ac7d5b501aea3f059fc42db301","prev_hash":"56ab844038ebfd578402a7ba89377304c5256f31c6fc7ed789923347b1c5cd7e"}
