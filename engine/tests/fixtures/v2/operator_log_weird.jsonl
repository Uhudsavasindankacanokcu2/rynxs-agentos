{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","team":"backend-team"},"name":"agent-100","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"latest","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"02d3af34097dd3cd"},"seq":0,"ts":0,"type":"AgentObserved"},"event_hash":"78fc7a80400422542b0557d1c56e6453d47c0ae2ce912a8b6d8c6ab8b82053b7","prev_hash":"0000000000000000000000000000000000000000000000000000000000000000"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_ids":["af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"latest\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-100-spec","namespace":"universe"},"target":"universe/agent-100-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-100-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-100"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:latest","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-100-workspace"},{"configmap":"agent-100-spec","name":"agent-spec"}]}},"target":"universe/agent-100-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-100-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-100","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-100-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-100-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-100-workspace"}],"actions_hash":"a1fd533e5c7a2467e2e40c822c44955739d1bdbb089b2c47a9c3491c8eb752c9","agent_id":"universe/agent-100","trigger_event_hash":"eb73fd921fbf891c81b9380125df1a201892a8c0d98dd539ad01e74d5355e249","trigger_event_seq":0,"trigger_event_type":"AgentObserved","trigger_spec_hash":"02d3af34097dd3cd"},"seq":1,"ts":1,"type":"ActionsDecided"},"event_hash":"bf355b1dad16513369de520455be8bb874e8dbe969f68aeb0eca23c2fe6c4561","prev_hash":"78fc7a80400422542b0557d1c56e6453d47c0ae2ce912a8b6d8c6ab8b82053b7"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-100-spec"},"seq":2,"ts":2,"type":"ActionApplied"},"event_hash":"f3459ee853d0612e88e3d7f9e6bedb17ad8e219807e7b2b9716c4e670d2354df","prev_hash":"bf355b1dad16513369de520455be8bb874e8dbe969f68aeb0eca23c2fe6c4561"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","error":{"code":"K8S_CONFLICT","reason":"Conflict","status":409,"type":"ApiException"},"result_code":"K8S_CONFLICT","target":"universe/agent-100-runtime"},"seq":3,"ts":3,"type":"ActionFailed"},"event_hash":"a25dd3fa9ce6bb810ffecced907f4418cfb0abf1bd5d0d90f5fc9597c6352f07","prev_hash":"f3459ee853d0612e88e3d7f9e6bedb17ad8e219807e7b2b9716c4e670d2354df"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-100-runtime"},"seq":4,"ts":4,"type":"ActionApplied"},"event_hash":"8cf17609ced28f1aa1bea80b2b16654d54e78bc0d2c38dd5cad050036d2df6ac","prev_hash":"a25dd3fa9ce6bb810ffecced907f4418cfb0abf1bd5d0d90f5fc9597c6352f07"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-100-deny-egress"},"seq":5,"ts":5,"type":"ActionApplied"},"event_hash":"eb344099acf417486af8941a6f131f74c8c590b66b4362f37849b13842a1b8df","prev_hash":"8cf17609ced28f1aa1bea80b2b16654d54e78bc0d2c38dd5cad050036d2df6ac"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-100-workspace"},"seq":6,"ts":6,"type":"ActionApplied"},"event_hash":"12bb3e60699818d6b6a66d35107c524ce703566c7c14c640a09b3389ff32cdb9","prev_hash":"eb344099acf417486af8941a6f131f74c8c590b66b4362f37849b13842a1b8df"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","team":"backend-team"},"name":"agent-100","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"latest","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":false,"canManageTeam":false},"role":"worker","team":"backend-team","workspace":{"size":"1Gi"}},"spec_hash":"02d3af34097dd3cd"},"seq":7,"ts":0,"type":"AgentObserved"},"event_hash":"51b5aa9d8ce8c547a372f16e5fe36ca37b6bb4a97210d6aab174274217a8d9a4","prev_hash":"12bb3e60699818d6b6a66d35107c524ce703566c7c14c640a09b3389ff32cdb9"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_ids":["af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"latest\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":false,\"canManageTeam\":false},\"role\":\"worker\",\"team\":\"backend-team\",\"workspace\":{\"size\":\"1Gi\"}}"},"name":"agent-100-spec","namespace":"universe"},"target":"universe/agent-100-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-100-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-100"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:latest","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-100-workspace"},{"configmap":"agent-100-spec","name":"agent-spec"}]}},"target":"universe/agent-100-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-100-deny-egress","namespace":"universe","pod_selector":{"agent":"agent-100","app":"universe-agent"},"policy_type":"deny-egress"},"target":"universe/agent-100-deny-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-100-workspace","namespace":"universe","size":"1Gi"},"target":"universe/agent-100-workspace"}],"actions_hash":"a1fd533e5c7a2467e2e40c822c44955739d1bdbb089b2c47a9c3491c8eb752c9","agent_id":"universe/agent-100","trigger_event_hash":"c91b11aedc19968b6d90b531437474e4b095d6ff60d668648847726aececfaf2","trigger_event_seq":7,"trigger_event_type":"AgentObserved","trigger_spec_hash":"02d3af34097dd3cd"},"seq":8,"ts":7,"type":"ActionsDecided"},"event_hash":"49a265e4c3eeb511f05b34c2c0402d90e86af012c4c348d19ed4a3312852f1ec","prev_hash":"51b5aa9d8ce8c547a372f16e5fe36ca37b6bb4a97210d6aab174274217a8d9a4"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"af56609c46fecf992eb0a1bb60b2e999ea97a3b5cde122f5470c243ea79cf259","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-100-spec"},"seq":9,"ts":8,"type":"ActionApplied"},"event_hash":"050b95491ec5d87d538025ae4606a22c8ba854fc7e56182d932ba29ad73d5319","prev_hash":"49a265e4c3eeb511f05b34c2c0402d90e86af012c4c348d19ed4a3312852f1ec"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"56c0325239c11a74c5cfdf46a2093af08fe21cacefa50a1d0b94ad1e917acc65","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-100-runtime"},"seq":10,"ts":9,"type":"ActionApplied"},"event_hash":"b79b5fcd7472cba6a78d6a8c400fa903544ef94bce3cf5222beb1cfda582cde7","prev_hash":"050b95491ec5d87d538025ae4606a22c8ba854fc7e56182d932ba29ad73d5319"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"2879c72e6275caa374a33c234ce83d064a3141486cee89a67b141effaa7cefd1","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-100-deny-egress"},"seq":11,"ts":10,"type":"ActionApplied"},"event_hash":"87d4efcda783f1fcb3b8761dcc4b9faf823122511ac1eb8c3733546babb6f042","prev_hash":"b79b5fcd7472cba6a78d6a8c400fa903544ef94bce3cf5222beb1cfda582cde7"}
{"event":{"aggregate_id":"universe/agent-100","hash_version":"v2","payload":{"action_id":"357b5da49205da6893ed671808fb628524bf64bc8943975695526aa9f1e53ca1","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-100-workspace"},"seq":12,"ts":11,"type":"ActionApplied"},"event_hash":"ea80bfe950332ffbb7478f4c5851a94dca7b2c8573c27d25a70f4a9a150c197f","prev_hash":"87d4efcda783f1fcb3b8761dcc4b9faf823122511ac1eb8c3733546babb6f042"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","meta":{"resource":"agents","source":"kubernetes"},"payload":{"labels":{"app":"universe-agent","policy":"strict","team":"platform-team"},"name":"agent-200","namespace":"universe","observed_logical_time":0,"spec":{"image":{"repository":"ghcr.io/test/agent","tag":"v2.1.0","verify":false},"permissions":{"canAccessAuditLogs":false,"canAssignTasks":true,"canManageTeam":false},"role":"manager","team":"platform-team","workspace":{"size":"2Gi"}},"spec_hash":"a0685a954dc6f97a"},"seq":13,"ts":0,"type":"AgentObserved"},"event_hash":"3c2a8304da420a8632c8fce9cba256630a78404be1be30251346b90bcb871229","prev_hash":"ea80bfe950332ffbb7478f4c5851a94dca7b2c8573c27d25a70f4a9a150c197f"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_ids":["3ef5321f0881ecdad0f0419ff1bae50971a4a8bfd06bad268a282f02c303febf","7f2fa55579f0fb19d4704b04132603795884fe621cdaa451cb8412f4e95f0133","44f0d64ea57826b4683889d31ca148f9d3b77621a5c194ce2054600c31826321","ee249e41bb3645b76107b7b9d52913e922aaaae6982d7ba473520196e30dbb42"],"actions":[{"action_type":"EnsureConfigMap","params":{"data":{"agent.json":"{\"image\":{\"repository\":\"ghcr.io/test/agent\",\"tag\":\"v2.1.0\",\"verify\":false},\"permissions\":{\"canAccessAuditLogs\":false,\"canAssignTasks\":true,\"canManageTeam\":false},\"role\":\"manager\",\"team\":\"platform-team\",\"workspace\":{\"size\":\"2Gi\"}}"},"name":"agent-200-spec","namespace":"universe"},"target":"universe/agent-200-spec"},{"action_type":"EnsureDeployment","params":{"name":"agent-200-runtime","namespace":"universe","spec":{"env":[{"name":"AGENT_NAME","value":"agent-200"},{"name":"AGENT_NAMESPACE","value":"universe"}],"image":"ghcr.io/test/agent:v2.1.0","image_verify":false,"replicas":1,"runtime_class":"gvisor","volume_mounts":[{"mount_path":"/workspace","name":"workspace"},{"mount_path":"/config","name":"agent-spec","read_only":true}],"volumes":[{"name":"workspace","pvc":"agent-200-workspace"},{"configmap":"agent-200-spec","name":"agent-spec"}]}},"target":"universe/agent-200-runtime"},{"action_type":"EnsureNetworkPolicy","params":{"name":"agent-200-allow-egress","namespace":"universe","pod_selector":{"agent":"agent-200","app":"universe-agent"},"policy_type":"allow-egress"},"target":"universe/agent-200-allow-egress"},{"action_type":"EnsurePVC","params":{"name":"agent-200-workspace","namespace":"universe","size":"2Gi"},"target":"universe/agent-200-workspace"}],"actions_hash":"9f0d8770d60b2ef604c0ebab6de19e680fbf351bc3c95b05cf0a9c8528069909","agent_id":"universe/agent-200","trigger_event_hash":"a20307d771831d50b04b763d0998d331490f33eda48cd899970ad31d5baa91d0","trigger_event_seq":13,"trigger_event_type":"AgentObserved","trigger_spec_hash":"a0685a954dc6f97a"},"seq":14,"ts":12,"type":"ActionsDecided"},"event_hash":"0c5e43c4d55b4f60864a606df47b54bfd7d9f01c262877d70bb5534748d7503a","prev_hash":"3c2a8304da420a8632c8fce9cba256630a78404be1be30251346b90bcb871229"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"3ef5321f0881ecdad0f0419ff1bae50971a4a8bfd06bad268a282f02c303febf","action_type":"EnsureConfigMap","result_code":"OK","target":"universe/agent-200-spec"},"seq":15,"ts":13,"type":"ActionApplied"},"event_hash":"a675f22adf3ee0fda5615ef4e58ef97a370bc92e7ef979149d310bcd03a7646c","prev_hash":"0c5e43c4d55b4f60864a606df47b54bfd7d9f01c262877d70bb5534748d7503a"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"7f2fa55579f0fb19d4704b04132603795884fe621cdaa451cb8412f4e95f0133","action_type":"EnsureDeployment","result_code":"OK","target":"universe/agent-200-runtime"},"seq":16,"ts":14,"type":"ActionApplied"},"event_hash":"3099662233b375056adbc5c0cd2ba14b83c8ea7341fe602055ec3614fdfda188","prev_hash":"a675f22adf3ee0fda5615ef4e58ef97a370bc92e7ef979149d310bcd03a7646c"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"44f0d64ea57826b4683889d31ca148f9d3b77621a5c194ce2054600c31826321","action_type":"EnsureNetworkPolicy","result_code":"OK","target":"universe/agent-200-allow-egress"},"seq":17,"ts":15,"type":"ActionApplied"},"event_hash":"d682613b5749914a105cb800121f91c88c4bbb7b22509a549ef8e056d919ae5d","prev_hash":"3099662233b375056adbc5c0cd2ba14b83c8ea7341fe602055ec3614fdfda188"}
{"event":{"aggregate_id":"universe/agent-200","hash_version":"v2","payload":{"action_id":"ee249e41bb3645b76107b7b9d52913e922aaaae6982d7ba473520196e30dbb42","action_type":"EnsurePVC","result_code":"OK","target":"universe/agent-200-workspace"},"seq":18,"ts":16,"type":"ActionApplied"},"event_hash":"002d87a6f8af27848d68bc1af54059776a894f8c1984e3c1bc41b678fcce60e0","prev_hash":"d682613b5749914a105cb800121f91c88c4bbb7b22509a549ef8e056d919ae5d"}
